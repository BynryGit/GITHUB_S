<!DOCTYPE html>

<html lang="en">

<!-- BEGIN HEAD -->
{% load staticfiles %}
<head>
    <meta charset="utf-8"/>
    <title>City Hoopla | Category</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/simple-line-icons/simple-line-icons.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/uniform/css/uniform.default.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="{% static 'assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/jquery-multi-select/css/multi-select.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2-bootstrap.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/select2/css/select2-bootstrap.min.css' %}" rel="stylesheet"
          type="text/css"/>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="{% static 'assets/global/plugins/datatables/datatables.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css' %}"
          rel="stylesheet" type="text/css"/>
    <!-- END PAGE LEVEL PLUGINS -->
    <!-- BEGIN THEME GLOBAL STYLES -->
    <link href="{% static 'assets/global/css/components.min.css' %}" rel="stylesheet" id="style_components"
          type="text/css"/>
    <link href="{% static 'assets/global/css/plugins.min.css' %}" rel="stylesheet" type="text/css"/>
    <!-- END THEME GLOBAL STYLES -->
    <!-- BEGIN THEME LAYOUT STYLES -->
    <link href="{% static 'assets/layouts/layout2/css/layout.min.css' %}" rel="stylesheet" type="text/css"/>
    <link href="{% static 'assets/layouts/layout2/css/themes/blue.min.css' %}" rel="stylesheet" type="text/css"
          id="style_color"/>
    <link href="{% static 'assets/layouts/layout2/css/custom.min.css' %}" rel="stylesheet" type="text/css"/>
    <!-- END THEME LAYOUT STYLES -->
    <link rel="shortcut icon" href="favicon.ico"/>

    <link href="{% static 'fancytree/ui.fancytree.css' %}" rel="stylesheet" type="text/css">
    <link href="{% static 'vendor/bootstrap-fileinput/jasny-bootstrap.min.css' %}" rel="stylesheet" media="screen">
    <link href="{% static 'spectrum/spectrum.css' %}" rel="stylesheet" media="screen">

</head>

<!-- END HEAD -->
<style type="text/css">
.has-success .control-label{
    color : #333;
}

.has-success .form-control {
    border: 1px solid #C2CAD8;
}

        div.dataTables_wrapper div.dataTables_info {
    padding-top: 8px;
    white-space: nowrap;
    display: none;
}
div.dataTables_wrapper div.dataTables_length label {
    font-weight: normal;
    text-align: left;
    white-space: nowrap;
    display: none;
}

div.dataTables_filter label {
    font-weight: normal;
    white-space: nowrap;
    text-align: left;
    display: none;
}

.border_s{

    border: 1px solid #ddd;
    padding: 10px;
}


div.checker span {
    display: -moz-inline-box;
    display: inline-block;
    zoom: 1;
    text-align: center;
    background-position: 0 -260px;

}

#processing{
    height: 100vh;
    position: fixed;
    width: 100%;
    margin: 0px auto;
    z-index: 9999;
    background-color: #FFF;
    background-image: none;
    background-attachment: scroll;
    background-position: 0% 0%;
    background-clip: border-box;
    background-origin: padding-box;
    background-repeat: repeat;
    background-size: inherit;
    opacity: 0.5;
}

#loading{
    width: 36%;
    height: 22px;
    position: absolute;
    top: 26%;
    left: 32%;
    margin: -28px 0px 0px -25px;
    text-align: center;
    font-size: 13px;
    font-weight: 500;
    color: #000;
}

.form-height{
height: 65px;
}

.user-image img {
    max-width: 100%;
}

.fileinput .thumbnail>img {
    height: 178px !important;
}

.fileinput-preview.thumbnail {
    max-width: 278px;
}

.btn-azure:hover {
    background-color: #0095C8;
    border-color: #0095C8;
    color: #ffffff;
}

.btn-file {
    overflow: hidden;
    position: relative;
    vertical-align: middle;
}

.user-image .user-image-buttons {
    position: static;

    <!--top: 20%;-->
    <!--left: 37%;-->
}

.btn-file input[type=file] {
    position: absolute;
    top: 0;
    right: 0;
    min-width: 100%;
    min-height: 100%;
    font-size: 100px;
    text-align: right;
    filter: alpha(opacity=0);
    opacity: 0;
    outline: none;
    background: white;
    cursor: inherit;
    display: block;
}

.btn-red:hover {
    background-color: #da4f4a !important;
    border-color: #da4f4a;
    color: #ffffff;
    display: none;
}

.btn-red{
    display: none;
}

.btn-sm, .btn-group-sm>.btn {
    padding: 5px 10px;
    font-size: 12px;
    line-height: 1.5;
    border-radius: 3px;
}

.btn {
    transition: all 0.3s ease 0s !important;
    background-image: none !important;
    box-shadow: none !important;
    outline: none !important;
    position: relative;
}

.fileinput .btn {
    vertical-align: middle;
}

.bootstrap-tagsinput {
    line-height: 35px;
    width: 980px;
}

.error{

    font-weight: 400;
    font-style: normal;
    font-size: 12px;
}

.form-wizard .steps > li.active > a.step .desc {
    color: #2F353B;
    font-weight: 700;

}

.portlet.light {
    <!--padding: 0px 0px 4px;-->
    <!--background-color: #eef1f5;-->
}

.form-wizard .steps, .form-wizard .steps > li > a.step {
    <!--background-color: #eef1f5;-->
    background-image: none;
    border: 0;
    box-shadow: none;
    filter: none;
}

.dropzone .dz-preview, .dropzone-previews .dz-preview{
    margin: 3px !important;
}

hr {
    border: 0;
    border-top: 1px solid #6B6B6B;
    border-bottom: 0;
}


#tab2 {
    padding-left: 25px;
    padding-right: 25px;
}

.map-wrapper {
    float: left;
    margin: 0px 0px 0 0px;
}

#map {
    border: 1px solid #DDD;
    width: 292px;
    overflow: hidden;
    height: 223px;
    margin: 10px 0 10px 0;
    -webkit-box-shadow: #AAA 0px 0px 15px;
}

#my-awesome-dropzone-3{
    border: 3px dashed black !important;
    min-height: 224px !important;
    background: #ffffff;
}

#my-active-dropzone{
    border: 3px dashed black !important;
    min-height: 224px !important;
    background: #ffffff;
}

.dropzone .dz-preview .dz-details img, .dropzone-previews .dz-preview .dz-details img {
    position: absolute;
    top: 0px;
    left: 0;
    width: 100% !important;
    height: 100% !important;
}

.dropzone .dz-preview, .dropzone-previews .dz-preview {
    background: rgba(255,255,255,0.8);
    position: relative;
    display: inline-block;
    margin: 4px;
    vertical-align: top;
    border: 1px solid #acacac;
    padding: 6px 6px 6px 6px;
}

.sel2{
    width: 100%;
}

.tab-active{
    background: rgb(13, 103, 230) none repeat scroll 0% 0% !important;
    color: rgb(16, 245, 182) !important;
}

.sel2{
    width: 100%;
}

.div-border-top{
    border: 1px solid #cccccc;
    border-bottom: none;
}

.div-border-bottom{
    border: 1px solid #cccccc;
    border-top: none;
}

.div-border-left-right{
    border: 1px solid #cccccc;
    border-top: none;
    border-bottom: none;
}

.div-border{
    border: 1px solid #cccccc;
}

.div-color{
    background-color: rgb(243, 242, 242);
    border: 2px solid rgb(204, 204, 204) !important;
    border-radius: 10px !important;
    margin-right: 0.5%;
    margin-left: 0.5%;
    margin-bottom: 1%;
}


@media (min-width:992px) {
    .col-lg-4 {
        width:32.33% !important;
    }
}


.form-control {
    border: 1px solid #c0c0c0;
}

.brad-crum-1{
    font-size:16px;
    color: #3eb199;
}

.brad-crum-2{
    font-size:16px;
    color: #00448b;
}

.brad-crum-3{
    font-size:16px;
    color: #00448b;
    font-weight:700;
}

.form-wizard .steps > li.active > a.step .number {
    background-color: #0d67e6;
    color: #fff;
}

.form-wizard .steps > li > a.step .number{
  /* fallback */
  background-color: #0d67e6;
  background-image: url(images/linear_bg_1.png);
  background-repeat: repeat-y;
  color: #ffffff;
  font-weight:500;

  /* Safari 4-5, Chrome 1-9 */
  background: -webkit-gradient(linear, left top, right top, from(#0d67e6), to(#11ca9a));

  /* Safari 5.1, Chrome 10+ */
  background: -webkit-linear-gradient(left, #0d67e6, #11ca9a);

  /* Firefox 3.6+ */
  background: -moz-linear-gradient(left, #0d67e6, #11ca9a);

  /* IE 10 */
  background: -ms-linear-gradient(left, #0d67e6, #11ca9a);

  /* Opera 11.10+ */
  background: -o-linear-gradient(left, #0d67e6, #11ca9a);
}

.grey_color{
    border: 1px solid rgb(72, 72, 72);
    color: rgb(255, 255, 255);
    background: rgb(72, 72, 72) none repeat scroll 0% 0%;
    border-radius: 20px !important;
}

.done_btn{
    color: rgb(255, 255, 255);
    border-radius: 20px !important;
    background-color: #0d67e6;
    background-image: url(images/linear_bg_1.png);
    background-repeat: repeat-y;

    /* Safari 4-5, Chrome 1-9 */
    background: -webkit-gradient(linear, left top, right top, from(#0d67e6), to(#11ca9a)) !important;
    background: -webkit-gradient(linear, left top, right top, from(#0d67e6), to(#11ca9a)) !important;

    /* Safari 5.1, Chrome 10+ */
    background: -webkit-linear-gradient(left, #0d67e6, #11ca9a) !important;
    border: -webkit-linear-gradient(left, #0d67e6, #11ca9a) !important;

    /* Firefox 3.6+ */
    background: -moz-linear-gradient(left, #0d67e6, #11ca9a) !important;
    border: -moz-linear-gradient(left, #0d67e6, #11ca9a) !important;

    /* IE 10 */
    background: -ms-linear-gradient(left, #0d67e6, #11ca9a) !important;
    border: -ms-linear-gradient(left, #0d67e6, #11ca9a) !important;

    /* Opera 11.10+ */
    background: -o-linear-gradient(left, #0d67e6, #11ca9a) !important;
    border: -o-linear-gradient(left, #0d67e6, #11ca9a) !important;

}


    .font-14{
        font-size:14px;
    }

    .font-12{
        font-size:12px;
    }

    .font-16{
        font-size:16px;
    }

    .font-15{
        font-size:15px;
    }

    .font-18{
        font-size:18px;
    }

    .font-green{
        color: #3eb199 !important;
    }

    .font-blue{
        color: #00448b !important;
    }

    .font-bold{
        font-weight:700;
    }

    .font-regular{
        font-weight:500;
    }

    @media (min-width:992px) {
      .box {
        height: auto !important;
      }
    }

    .parent{
        position: relative;
    }

    .child{
        width: 100%;
        position: absolute;
        bottom: 0;
        border-bottom-left-radius: 15px !important;
        border-bottom-right-radius: 15px !important;
    }

    .no_child{
        border-bottom-left-radius: 15px !important;
        border-bottom-right-radius: 15px !important;
    }

    .vertical_center{
        position: relative;
        top: 50%;
        -webkit-transform: translateY(-50%);
        -ms-transform: translateY(-50%);
        transform: translateY(-50%);
    }

    .text_center{
        position: relative;
        top: 25%;
        -webkit-transform: translateY(-50%);
        -ms-transform: translateY(-50%);
        transform: translateY(-50%);
    }

.bootstrap-switch .bootstrap-switch-handle-on.bootstrap-switch-primary {
    color: #444040;
    background: #a09d9d;
}

.bootstrap-switch .bootstrap-switch-handle-on, .bootstrap-switch .bootstrap-switch-handle-off, .bootstrap-switch .bootstrap-switch-label {
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    cursor: pointer;
    display: inline-block !important;
    height: 100%;
    padding: 3px 12px;
    font-size: 13px;
    line-height: 20px;
}


@media (min-width:992px) {
    .col-md-3 {
        width:24% !important;
    }
    
}


</style>

<body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid">
<div id="processing" style="display:none;">
    <div id="loading">
        <img src="{% static 'assets/loading-bars.gif' %}" style="height : 100px;">
    </div>
</div>
<!-- BEGIN HEADER -->
<div class="page-header navbar navbar-fixed-top">
    <!-- BEGIN HEADER INNER -->
    <div class="page-header-inner ">
        <!-- BEGIN LOGO -->
        <div class="page-logo">
            <a href="/dashboard/">
                <img src="{% static 'assets/layouts/layout2/img/City_Hoopla_Logo.png' %}" alt="logo"
                     class="logo-default"/> </a>
            <div class="menu-toggler sidebar-toggler">
                <!-- DOC: Remove the above "hide" to enable the sidebar toggler button on header -->
            </div>
        </div>
        <!-- END LOGO -->
        <!-- BEGIN RESPONSIVE MENU TOGGLER -->
        <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse"
           data-target=".navbar-collapse"> </a>
        <!-- END RESPONSIVE MENU TOGGLER -->
        <!-- BEGIN PAGE TOP -->
        <div class="page-top">
            <!-- BEGIN TOP NAVIGATION MENU -->
            <div class="top-menu">
                <ul class="nav navbar-nav pull-right">
                   
                    <li class="dropdown dropdown-user">
                        <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown"
                           data-close-others="true">
                            <!--  <img alt="" class="img-circle" src="{% static 'assets/layouts/layout2/img/avatar3_small.jpg' %}" /> -->
                            <span class="username username-hide-on-mobile">{{ username }}</span>
                            <i class="fa fa-angle-down"></i>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-default">
                            <li>
                                <a href="/log-out/">
                                    <i class="icon-key"></i> Log Out </a>
                            </li>
                        </ul>
                    </li>
                    
                </ul>
            </div>
            <!-- END TOP NAVIGATION MENU -->
        </div>
        <!-- END PAGE TOP -->
    </div>
    <!-- END HEADER INNER -->
</div>
<!-- END HEADER -->
<!-- BEGIN HEADER & CONTENT DIVIDER -->
<div class="clearfix"></div>
<!-- END HEADER & CONTENT DIVIDER -->
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN SIDEBAR -->
    <div class="page-sidebar-wrapper">
        <!-- END SIDEBAR -->
        <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
        <!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->
        <div class="page-sidebar navbar-collapse collapse">
            <!-- BEGIN SIDEBAR MENU -->
            <!-- DOC: Apply "page-sidebar-menu-light" class right after "page-sidebar-menu" to enable light sidebar menu style(without borders) -->
            <!-- DOC: Apply "page-sidebar-menu-hover-submenu" class right after "page-sidebar-menu" to enable hoverable(hover vs accordion) sub menu mode -->
            <!-- DOC: Apply "page-sidebar-menu-closed" class right after "page-sidebar-menu" to collapse("page-sidebar-closed" class must be applied to the body element) the sidebar sub menu mode -->
            <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
            <!-- DOC: Set data-keep-expand="true" to keep the submenues expanded -->
            <!-- DOC: Set data-auto-speed="200" to adjust the sub menu slide up/down speed -->
            {% include 'Admin/side-panel.html' %}
            <!-- END SIDEBAR MENU -->
        </div>
        <!-- END SIDEBAR -->
    </div>
    <!-- END SIDEBAR -->
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <!-- BEGIN CONTENT BODY -->
        <div class="page-content">
         
         
        <!-- END PAGE HEADER-->
            <div class="row">
                <div class="col-lg-12">
                    <div class="portlet light  ">
                    
                           <!-- BEGIN PAGE HEADER-->
					            <div class="page-bar">
					                <ul class="page-breadcrumb">
					
					                    <li>
					                        <span style="color: #3eb199;font-size: 16px;">Configure</span>
					                        <i class="fa fa-angle-right"></i>
					                    </li>
					                    <li>
					                      <span style="color: #00448b;font-size: 16px;">  Category </span>
											  </li>
					                
					                </ul>
					            </div>
					            
			              <h4 class="page-title"> City Life </h4>
					
					            <!-- END PAGE HEADER-->


                        <div class="portlet-body form">
                            <!-- BEGIN FORM-->
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="portlet-body">

                                        <div class="form-wizard">
                                            <div class="form-body">
                                                <!-- Start of tabs -->

                                                <div class="tab-content">
                                                    <div id="tab1" class="tab-pane fade active in">
                                                        <form id="cityform" role="form" enctype="multipart/form-data"
                                                              name="city-form" method="POST">
                                                            {% csrf_token %}

                                                            <div class="row" >
                                                                <div class="col-lg-3">
                                                                    <div class="form-group">
                                                                        <label class="control-label ">Country
                                                                        </label>
                                                                        <select id="country" name="country"
                                                                                class="country country_category form-control" onchange="getCity()">
                                                                            <option value="">Select Country</option>
                                                                            {% for country in country_list %}
                                                                            <option value="{{country.country_id}}">
                                                                                {{country.country}}
                                                                            </option>
                                                                            {% endfor %}
                                                                        </select>
                                                                        <label class="error"
                                                                               style="color:red; display:none;"></label>
                                                                        <!--  <label class="error" id="state_error" style="color:red; display:none;"></label>      -->
                                                                    </div>

                                                                </div>
                                                                <div class="col-lg-3">
                                                                    <div class="form-group">
                                                                        <label class="control-label ">City
                                                                        </label>
                                                                        <select id="city" name="city"
                                                                                class="city city_category form-control" onchange="open_addcat();">
                                                                            <option value="">Select City</option>
                                                                            {% for city in city_places_list %}
                                                                            <option value="{{city.city_place_id}}">
                                                                                {{city.city}}
                                                                            </option>
                                                                            {% endfor %}
                                                                        </select>
                                                                        <label class="error"
                                                                               style="color:red; display:none;"></label>
                                                                        <!--  <label class="error" id="state_error" style="color:red; display:none;"></label>      -->
                                                                    </div>
                                                                </div>
                                                                
                                                                 <div class="col-lg-6" style="margin-top: 30px;float: right;padding-left: 392px;">
                                                                    <a onclick="add_sub_cat(this.name,0,0,0)"
                                                                       name="sub_cat_level_1-collapse_btn_1"
                                                                       class="btn btn-outline done_btn"> Add Category </a>
                                                                </div>
                                                                
                                                            </div>
                                                            
                                                            <div id="city-sequence">

                                                            </div>

                                                            <label class="error" id="city_error"
                                                                   style="color:red; display:none;"></label>
                                                            <hr>
                                                        </form>
                                                       
                                                         
                                                                
                                                               <br>

																	<div class="row" style="">		
																		<div class="col-lg-12" style="z-index: 900;">
																			<div class="col-lg-5" style="z-index: 900;">
																			</div>	
																			<div class="col-lg-4" style="z-index: 900;">									                
												                     <label id="show_data" class="text-center ">  </label> 
												                     </div>
												                     <div class="col-lg-3" style="z-index: 900;">
												                     </div>
												                  </div>
												               </div>
                                                                                                                 
                                                      
                                                        <div class="row" id="cat_div" style="display:none">

                                                            <div class="col-lg-12" style="z-index: 900;">
                                                                <div class="form-group">
                                                                    <label class="control-label ">Category
                                                                        <span class="required"> * </span>
                                                                    </label>
                                                                </div>
                                                                                                                          
                                                                
                                                                <div class="row" style='margin-left: 2.33333%;'
                                                                     id="sub_cat_level_1">

                                                                </div>

                                                            </div>
                                                              
                                                        </div>

                                                        <br>

                                                        <div id="save_btn" class="form-actions text-right" style="display:none">

                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <a href="/city-life/category-life/"> <input type="button"
                                                                                                 class="btn btn-outline grey_color "
                                                                                                 data-dismiss="modal"
                                                                                                 value="Cancel"></input></a>
                                                                    <input id="add_category" value="Save" class="btn btn-outline done_btn"
                                                                           type="button" >
                                                                </div>
                                                            </div>
                                                        </div>

                                                    </div>
                                                </div>


                                            </div><!-- End Of tab content -->
                                        </div>
                                    </div>
                                </div><!-- End of second tab -->
                            </div>
                            <!--</form>  -->
                        </div>
                    </div>
                    <!-- END FORM-->
                </div>
            </div>
            <!-- END PORTLET-->

        </div>
    </div>
</div>
<!-- END CONTENT BODY -->
</div>
<!-- END CONTENT -->
</div>
</div>
<!-- END CONTAINER -->
<!-- /.modal -->



<!-- BEGIN FOOTER -->
    <div class="page-footer">
        <div class="page-footer-inner"> 2016 © DigiSpace Software Private Limited
            
        </div>
        <div class="scroll-to-top">
            <i class="icon-arrow-up"></i>
        </div>
    </div>
</div>
<!-- END FOOTER -->


<div style="overflow-y:hidden;" id="affiliate-modal" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 374px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 130px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!-- <a href="/category/">  <button type="button" class="close" data-dismiss="modal">&times;</button></a> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 style="text-align:center;" id="cat_model">Category added successfully</h4>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-5 col-md-2">
                     <input type="button" data-dismiss="modal" value="OK" class="btn btn-primary" id="btn-loading-demo" >
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>

<div style="overflow-y:hidden;" id="error-modal" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 416px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 146px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 class="text-center" id="error-message"></h4>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-5 col-md-2">
                        <input data-dismiss="modal" type="submit" value="OK"
                               class="btn btn-primary" id="btn-loading-demo">
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div style="overflow-y:hidden;" id="remove_cat_model" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 416px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 146px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 style="text-align:center;">Do you want to delete the category ?</h4>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-12">
                    		 <div class="col-md-6" id="yup">
   								  <input  type="hidden" 
                               class="btn btn-primary" id="yes1" >                             
                             <input  type="submit" value="Yes"
                               class="btn btn-primary" id="btn-loading-demo" onclick="call_rem();">
                         </div>
                         <div class="col-md-2" >
                             <input data-dismiss="modal" type="submit" value="No"
                               class="btn btn-primary" id="btn-loading-demo" >
                         </div>
                    </div>
                    
                </div>
            </div>
        </div>

    </div>
</div>

<div style="overflow-y:hidden;" id="success_cat_model" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 416px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 146px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 style="text-align:center;"> Category deleted successfully </h4>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-12">
                    		
                        <div class="col-md-offset-5 col-md-2">
                           <input type="button" data-dismiss="modal" value="OK" class="btn btn-primary" id="btn-loading-demo" >
                       </div>
                    </div>
                    
                </div>
            </div>
        </div>

    </div>
</div>

<!-- END FOOTER -->
<!--[if lt IE 9]>
<script src="{% static 'assets/global/plugins/respond.min.js"></script>
<script src="{% static 'assets/global/plugins/excanvas.min.js"></script>
<![endif]-->
<!-- BEGIN CORE PLUGINS -->
<script src="{% static 'assets/global/plugins/jquery.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/js.cookie.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery.blockui.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/uniform/jquery.uniform.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}"
        type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="{% static 'assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js' %}"
        type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="{% static 'assets/global/plugins/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/pages/scripts/components-select2.min.js' %}" type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN THEME GLOBAL SCRIPTS -->
<script src="{% static 'assets/global/scripts/app.min.js' %}" type="text/javascript"></script>
<!-- END THEME GLOBAL SCRIPTS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="{% static 'assets/pages/scripts/components-multi-select.min.js' %}" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN PAGE LEVEL PLUGINS -->
<script src="{% static 'assets/global/scripts/datatable.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/datatables/datatables.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js' %}"
        type="text/javascript"></script>
<!-- END PAGE LEVEL PLUGINS -->
<!-- BEGIN PAGE LEVEL SCRIPTS -->
<script src="{% static 'assets/pages/scripts/table-datatables-managed.min.js' %}" type="text/javascript"></script>
<!-- END PAGE LEVEL SCRIPTS -->
<!-- BEGIN THEME LAYOUT SCRIPTS -->
<script src="{% static 'assets/layouts/layout2/scripts/layout.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/layouts/layout2/scripts/demo.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/layouts/global/scripts/quick-sidebar.min.js' %}" type="text/javascript"></script>
<!-- END THEME LAYOUT SCRIPTS -->
<!-- END THEME LAYOUT SCRIPTS -->

<script src="{%static 'assets/pages/scripts/dropzone1.js' %}" type="text/javascript"></script>
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.12.1/jquery.min.js"></script>-->

<script src="{%static 'fancytree/jquery-ui.js' %}" type="text/javascript"></script>

<script src="{%static 'fancytree/jquery.fancytree.js' %}" type="text/javascript"></script>
<script src="{%static 'fancytree/jquery.fancytree.edit.js' %}" type="text/javascript"></script>
<script src="{% static 'vendor/bootstrap-fileinput/jasny-bootstrap.js' %}"></script>
<script src="{% static 'spectrum/spectrum.js' %}"></script>

<script type="text/javascript">


$("#ref_data_nav").addClass("active");
$("#category_nav").addClass("active");

var cat_id_global =''
function call_rem() {

	var xyz = document.getElementsByName($("#yes1").val());

	$(xyz).parent().parent().parent().parent().find('.col-lg-12').children().find('.fa-caret-down').removeClass("fa-caret-down").addClass("fa-caret-right");
   $(xyz).parent().parent().next('div').html('');
   $(xyz).parent().parent().html('');
   $("#remove_cat_model").modal('hide');
   
   
      event.preventDefault();  

			cat_id_global = cat_id_global
  			$.ajax({
  				  
				   type	: "POST",
				   url : '/city-life/delete-citylife-cat/',
 					data : {'cat_id_global': cat_id_global},
				                       
              success: function (response) {
	              if(response.success=='true'){
		           	  	    
				          $("#sub_cat_level_1").html("");
		           	    $.each(response.final_list, function (index, item) {
        		              btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_"+ index +"' id='"+item.category_id+"' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
                          child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level"+ index +"'></div>"
                          var div_str = "<div class='col-lg-12'><div class='col-lg-10' style='width: 422px;margin-left: -39px;'><div class='form-group' >"
                          div_str = div_str + "<input value='"+item.category_name+"' type='text' name='level_1' id='"+ item.category_id +"' class='form-control' /><label for='sub_cat_name"+ index +"' class='error' style='color:red; display:none;'></div></div>"
                          div_str = div_str + btn + "</div>"+ child_div
						        $("#sub_cat_level_1").append(div_str);
						        $("#sub_cat_level_1").show();
				          });
				         $("#success_cat_model").modal('show');
				          
	              	}
	      			if (response.success == "false") {
							$("#error-modal").modal('show');                    
	       			}							                        		                      		                       		
               },
               	beforeSend: function () {
            $("#processing").css('display','block');
            },
            complete: function () {
                $("#processing").css('display','none');
            },
               error : function(response){
                  	alert("_Error");
            	}              
           });
   
  
   
}
 
function remove_sub_cat_new(xyz){
    $("#yes1").val(xyz.name);
    cat_id_global = xyz.id
    $("#remove_cat_model").modal('show');
}
    
list = []

function open_addcat() {

if ($("#city").val()!= '' ) {
 
		 $("#cat_div").css("display","block");
		 $("#save_btn").css("display","block");
       
      event.preventDefault();  

	   var formData= new FormData();
		formData.append('city',$("#city").val());

  			$.ajax({
  				  
				   type	: "POST",
				   url : '/city-life/citylife-cat/',
 					data : formData,
					cache: false,
		         processData: false,
		    		contentType: false,                       
              success: function (response) {
	              if(response.success=='true'){
		           	  	 if (response.final_list != '') {
		           	  	
		           	  	 $("#show_data").html(""); 	
				          $("#sub_cat_level_1").html("");
		           	    $.each(response.final_list, function (index, item) {
        		              btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_"+ index +"' id='"+item.category_id+"' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
                          child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level"+ index +"'></div>"
                          var div_str = "<div class='col-lg-12'><div class='col-lg-10' style='width: 422px;margin-left: -39px;'><div class='form-group' >"
                          div_str = div_str + "<input value='"+item.category_name+"' type='text' name='level_1' id='"+ item.category_id +"' class='form-control' /><label for='sub_cat_name"+ index +"' class='error' style='color:red; display:none;'></div></div>"
                          div_str = div_str + btn + "</div>"+ child_div
						        $("#sub_cat_level_1").append(div_str);
						        $("#sub_cat_level_1").show();
				          });
				         
		           	  	 }
		           	  	else {
		           	  		 $('#show_data').text("No category available");
		           	  		 $("#cat_div").css("display","none");
		                   $("#save_btn").css("display","none");
		           	  	} 
	              	}
	      			if (response.success == "false") {
							$("#error-modal").modal('show');                    
	       			}							                        		                      		                       		
               },
               	beforeSend: function () {
            $("#processing").css('display','block');
            },
            complete: function () {
                $("#processing").css('display','none');
            },
               error : function(response){
                  	alert("_Error");
            	}              
           });   
			
		}
else {

	$("#sub_cat_level_1").css('display','none');
	$("#cat_div").css("display","none");
   $("#save_btn").css("display","none");
   $("#show_data").html(""); 
}  
}	

 $(document).ready(function(){
     $(".city").select2();
     $("#city").select2();
     $("#country").select2();
 });


  i = 1;
  j = 0;
  k = 0;
  
function add_sub_cat(div_name,level,key,a){

        var div_name = div_name.split('-');
        $("#"+div_name[1]).removeClass("fa fa-caret-right fa-lg").addClass("fa fa-caret-down fa-lg");
        if(level == 5){
            return false;
        }
        i = i + 1;
        k = k + 1;
        levels = level + 1;
        if(level == 0){
            level_name = 'level_1'
        }
        else if(level == 1){
            level_name = 'level_2'
        }
        else if(level == 2){
            level_name = 'level_3'
        }
        else if(level == 3){
            level_name = 'level_4'
        }
        else if(level == 4){
            level_name = 'level_5'
        }
      
            btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_' id='' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
           // btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'><a name='sub_cat_level"+ i +"-collapse_btn_"+ i +"' onclick='add_sub_cat(this.name,"+levels+","+j+","+k+")' class='fa fa-plus-circle fa-lg'></a>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
            child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level"+ i +"'></div>"
            
        $("#"+div_name[0]).append(
            "<div class='col-lg-12'><div class='col-lg-10' style='width: 422px;margin-left: -39px;'><div class='form-group' >"+
           
            "<input type='text' name='"+level_name+"' id='' class='form-control' /><label for='sub_cat_name"+ k +"' class='error' style='color:red; display:none;'></div></div>"+
            btn + "</div>"+ child_div

        );

        $("#"+div_name[0]).show();
    }


    $("#add_category").click(function(event)  {

        if (validateData() == false){
            return false;
        };

        var panel= $("#sub_cat_level_1");
        var inputs = panel.find("input");
        var namePattern = /[a-zA-Z0-9\-\s]+$/;

        for (i = 0; i < inputs.length; i++) {

            var label = $("label[for='"+inputs[i].id+"']");
            if(namePattern.test(inputs[i].value))
            {
                if($.isNumeric(inputs[i].value))
                {
                    label.css("display", "block");
                    label.html("Category should contain alphanumeric only");
                    return false;
                }
            }
            else{
                label.css("display", "none");
                label.html("");
            }
        }

        event.preventDefault();

        category = $("#cat_name").val();
        var namePattern = /[a-zA-Z0-9\-\s]+$/;

        if (category=="")
        {
            $("#cat_error").css("display", "block");
            $("#cat_error").html("Please enter category");
            return false;
        }
        else{
            $("#cat_error").css("display", "none");
            $("#cat_error").html("");
        }

        if(namePattern.test(category))
        {
            if($.isNumeric($("#cat_name").val()))
            {
                $("#cat_error").css("display", "block");
                $("#cat_error").html("Category should contain alphanumeric only");
                return false;
            }
        }
        else{
            $("#cat_error").css("display", "none");
            $("#cat_error").html("");
        }

        var panel= $("#sub_cat_level_1");
        var inputs = panel.find("input");

        var level_1 = '';
        var level_2 = [];
        var level_3 = [];
        var level_4 = [];
        var level_5 = [];
        list = []
        list1 = []
        for (i = 0; i < inputs.length; i++) {
            j = i + 1;
            if (j <= inputs.length){
                if (j== inputs.length){
                    j = j - 1;
                }
              
                if($.isNumeric(inputs[i].value)){
                    $(inputs[i]).parent().children('.error').css("display", "block");
                    $(inputs[i]).parent().children('.error').html("category should contain alphanumeric only");;
                    return false;
                }
                if(inputs[i].name == 'level_1'){
                    if(level_1 !=[] && inputs[j].name != 'level_2' || level_1 ==[] && inputs[j].name != 'level_2'){
                        level_1 = [];
                       
                        level_1 = inputs[i].value;                   
                        list.push(level_1);
                        
                        cat_id = inputs[i].id ;
                        if (cat_id == "") {
                        	list1.push("");	
                        }
                        else {
                        	list1.push(cat_id);	
                        }

                    }
                    else{
                        level_1 = []
                        level_1 = inputs[i].value
                        level_2 = []
                        level_3 = []
                        level_4 = []
                        level_5 = []
                    }
                }               
            }
            //console.log(inputs[i].value);
        }

        var formData = new FormData();

        formData.append('list',list);
        formData.append('list1',list1);

        //formData.append('form_data',$("#cityform").serialize());
        formData.append('city',$("#city").val());
        formData.append('country',$("#country").val());

        $.ajax({

            type : 'POST',
            url : '/city-life/save-category-citylife/',
            data : formData,
            cache: true,
            processData: false,
            contentType: false,

            success: function (response) {
                if(response.success=='true'){
                                    
                      $("#sub_cat_level_1").html("");
		           	    $.each(response.final_list, function (index, item) {
        		              btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_' id='"+item.category_id+"' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
                          child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level"+ index +"'></div>"
                          var div_str = "<div class='col-lg-12'><div class='col-lg-10' style='width: 422px;margin-left: -39px;'><div class='form-group' >"
                          div_str = div_str + "<input value='"+item.category_name+"' type='text' name='level_1' id='"+item.category_id+"' class='form-control' /><label for='sub_cat_name"+ index +"' class='error' style='color:red; display:none;'></div></div>"
                          div_str = div_str + btn + "</div>"+ child_div
						        $("#sub_cat_level_1").append(div_str);
						        $("#sub_cat_level_1").show();
				          });
				            $('#cat_model').text(response.message)
				            $("#affiliate-modal").modal('show');

                }
               else if (response.success=='true1') {
               	 $("#sub_cat_level_1").html("");
               	 $("#affiliate-modal").modal('show');
               }
                if (response.success == "false") {
                    $('#error-message').text(response.message)
                        $("#error-modal").modal('show');
                    }
                },
                beforeSend: function () {
                    $("#processing").css('display','block');
                },
                complete: function () {
                    $("#processing").css('display','none');
                },
                error : function(response){
                    alert("_Error");
                }
            });

    });

function validateData(){
        if(checkcountry("#country") == true & checkCity("#city") == true){
          
            return true;
        }
        else {
        	 return false;
        }
       
    }


function checkcountry(country){
 if($(country).val()!='' && $(country).val()!=null)
   {
   $(country).parent().children('.error').css("display", "none");
   return true;
   }

   else {
    $(country).parent().children('.error').css("display", "block");
    $(country).parent().children('.error').text("Please select Country");
   return false; 
   }
}

function checkCity(city){
 if($(city).val()!='' && $(city).val()!=null)
   {
   $(city).parent().children('.error').css("display", "none");
   return true;
   }

   else {
    $(city).parent().children('.error').css("display", "block");
    $(city).parent().children('.error').text("Please select City");
   return false; 
   }
}

function getCity() {

        cont_id = $('#country :selected').val();
        if (cont_id) {
            $.ajax({

                type: 'GET',
                url: '/city-life/get-city-countrybase/',
                data: {'cont_id': cont_id},
                success: function (response) {
                		//	alert('success');
                    $('#city').html('');
                    $('#city').append("<option value=''>Select City</option>");
                    $.each(response.city_list, function (index, item) {
                        $('#city').append(item);
                    });
                    $('#city').val("");
                },
                error: function (response) {
                    alert("Error!");
                },
            });
        }
        else {
        $('#city').html('');
        $('#city').val("");
        $("#sub_cat_level_1").css('display','none');
        }
    }

</script>

</body>

</html>

<!DOCTYPE html>
<!-- 
Template Name: Metronic - Responsive Admin Dashboard Template build with Twitter Bootstrap 3.3.6
Version: 4.5.3
Author: KeenThemes
Website: http://www.keenthemes.com/
Contact: support@keenthemes.com
Follow: www.twitter.com/keenthemes
Like: www.facebook.com/keenthemes
Purchase: http://themeforest.net/item/metronic-responsive-admin-dashboard-template/4021469?ref=keenthemes
License: You must have a valid license purchased only from themeforest(the above link) in order to legally use the theme for your project.
-->
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
    <!--<![endif]-->
    <!-- BEGIN HEAD -->
{% load staticfiles %}
    <head>
        <meta charset="utf-8" />
        <title>CityHoopla | Category</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta content="width=device-width, initial-scale=1" name="viewport" />
        <meta content="" name="description" />
        <meta content="" name="author" />
        <!-- BEGIN GLOBAL MANDATORY STYLES -->
        <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700&subset=all" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/font-awesome/css/font-awesome.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/simple-line-icons/simple-line-icons.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/uniform/css/uniform.default.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END GLOBAL MANDATORY STYLES -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <link href="{% static 'assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/jquery-multi-select/css/multi-select.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/select2/css/select2.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/select2/css/select2-bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
           <link href="{% static 'assets/global/plugins/select2/css/select2.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/select2/css/select2-bootstrap.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END PAGE LEVEL PLUGINS -->
                <!-- BEGIN PAGE LEVEL PLUGINS -->
        <link href="{% static 'assets/global/plugins/datatables/datatables.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css' %}" rel="stylesheet" type="text/css" />
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN THEME GLOBAL STYLES -->
        <link href="{% static 'assets/global/css/components.min.css' %}" rel="stylesheet" id="style_components" type="text/css" />
        <link href="{% static 'assets/global/css/plugins.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END THEME GLOBAL STYLES -->
        <!-- BEGIN THEME LAYOUT STYLES -->
        <link href="{% static 'assets/layouts/layout2/css/layout.min.css' %}" rel="stylesheet" type="text/css" />
        <link href="{% static 'assets/layouts/layout2/css/themes/blue.min.css' %}" rel="stylesheet" type="text/css" id="style_color" />
        <link href="{% static 'assets/layouts/layout2/css/custom.min.css' %}" rel="stylesheet" type="text/css" />
        <!-- END THEME LAYOUT STYLES -->
        <link rel="shortcut icon" href="favicon.ico" /> </head>
    <!-- END HEAD -->
    <style type="text/css">
.table-scrollable>.table-bordered>tbody>tr>td:first-child, .table-scrollable>.table-bordered>tbody>tr>th:first-child, .table-scrollable>.table-bordered>tfoot>tr>td:first-child, .table-scrollable>.table-bordered>tfoot>tr>th:first-child, .table-scrollable>.table-bordered>thead>tr>td:first-child, .table-scrollable>.table-bordered>thead>tr>th:first-child {
    border-left: 0;
    width: 17% !important;
}

.table-scrollable>.table-bordered>tbody>tr>td:last-child, .table-scrollable>.table-bordered>tbody>tr>th:last-child, .table-scrollable>.table-bordered>tfoot>tr>td:last-child, .table-scrollable>.table-bordered>tfoot>tr>th:last-child, .table-scrollable>.table-bordered>thead>tr>td:last-child, .table-scrollable>.table-bordered>thead>tr>th:last-child {
    border-right: 0;
    text-align: center;
}


        div.dataTables_wrapper div.dataTables_info {
    padding-top: 8px;
    white-space: nowrap;
    display: none;
}
div.dataTables_wrapper div.dataTables_length label {
    font-weight: normal;
    text-align: left;
    white-space: nowrap;
    display: none;
}

div.dataTables_filter label {
    font-weight: normal;
    white-space: nowrap;
    text-align: left;
    display: none;
}

#processing{
    height: 100vh;
    position: fixed;
    width: 100%;
    margin: 0px auto;
    z-index: 9999;
    background-color: #FFF;
    background-image: none;
    background-attachment: scroll;
    background-position: 0% 0%;
    background-clip: border-box;
    background-origin: padding-box;
    background-repeat: repeat;
    background-size: inherit;
    opacity: 0.5;
}

.done_btn1 {
    color: #FFF;
    border-radius: 20px !important;
    background: transparent -moz-linear-gradient(left center , #0D67E6, #11CA9A) repeat scroll 0% 0% !important;
}

.done_btn{
    color: rgb(255, 255, 255);
    border-radius: 20px !important;
    background-color: #0d67e6;
    background-image: url(images/linear_bg_1.png);
    background-repeat: repeat-y;

    /* Safari 4-5, Chrome 1-9 */
    background: -webkit-gradient(linear, left top, right top, from(#0d67e6), to(#11ca9a)) !important;
    background: -webkit-gradient(linear, left top, right top, from(#0d67e6), to(#11ca9a)) !important;

    /* Safari 5.1, Chrome 10+ */
    background: -webkit-linear-gradient(left, #0d67e6, #11ca9a) !important;
    border: -webkit-linear-gradient(left, #0d67e6, #11ca9a) !important;

    /* Firefox 3.6+ */
    background: -moz-linear-gradient(left, #0d67e6, #11ca9a) !important;
    border: -moz-linear-gradient(left, #0d67e6, #11ca9a) !important;

    /* IE 10 */
    background: -ms-linear-gradient(left, #0d67e6, #11ca9a) !important;
    border: -ms-linear-gradient(left, #0d67e6, #11ca9a) !important;

    /* Opera 11.10+ */
    background: -o-linear-gradient(left, #0d67e6, #11ca9a) !important;
    border: -o-linear-gradient(left, #0d67e6, #11ca9a) !important;

}

.grey_color{
    border: 1px solid rgb(72, 72, 72);
    color: rgb(255, 255, 255);
    background: rgb(72, 72, 72) none repeat scroll 0% 0%;
    border-radius: 20px !important;
}


.brad-crum-1{
    font-size:16px;
    color: #3eb199;
}
.brad-crum-2{
    font-size:16px;
    color: #00448b;
}

.brad-crum-3{
    font-size:16px;
    color: #00448b;
    font-weight:700;
}


#loading{
    width: 36%;
    height: 22px;
    position: absolute;
    top: 26%;
    left: 32%;
    margin: -28px 0px 0px -25px;
    text-align: center;
    font-size: 13px;
    font-weight: 500;
    color: #000;
}

.custom-bg-color{
	background-color: rgb(230, 230, 230) !important;
}

.custom-hr{
	border-color: #B6B6B6 -moz-use-text-color -moz-use-text-color !important;
	margin-top: 0px !important;
}

.page-header.navbar .page-logo .logo-default {
    margin: 2px 0 0;
    width: 105px;
    background: rgba(255, 255, 255, 0.48);
}

.page-header.navbar .page-logo {
  /* fallback */
  background-color: #0d67e6;
  background-image: url(images/linear_bg_1.png);
  background-repeat: repeat-y;

  /* Safari 4-5, Chrome 1-9 */
  background: -webkit-gradient(linear, left top, right top, from(#0d67e6), to(#11ca9a));

  /* Safari 5.1, Chrome 10+ */
  background: -webkit-linear-gradient(left, #0d67e6, #11ca9a);

  /* Firefox 3.6+ */
  background: -moz-linear-gradient(left, #0d67e6, #11ca9a);

  /* IE 10 */
  background: -ms-linear-gradient(left, #0d67e6, #11ca9a);

  /* Opera 11.10+ */
  background: -o-linear-gradient(left, #0d67e6, #11ca9a);
}

@media (max-width: 767px){
.page-header.navbar {
     background-color: #0d67e6;
  background-image: url(images/linear_bg_1.png);
  background-repeat: repeat-y;

  /* Safari 4-5, Chrome 1-9 */
  background: -webkit-gradient(linear, left top, right top, from(#0d67e6), to(#11ca9a));

  /* Safari 5.1, Chrome 10+ */
  background: -webkit-linear-gradient(left, #0d67e6, #11ca9a);

  /* Firefox 3.6+ */
  background: -moz-linear-gradient(left, #0d67e6, #11ca9a);

  /* IE 10 */
  background: -ms-linear-gradient(left, #0d67e6, #11ca9a);

  /* Opera 11.10+ */
  background: -o-linear-gradient(left, #0d67e6, #11ca9a);
}
}

    </style>

     <body class="page-header-fixed page-sidebar-closed-hide-logo page-container-bg-solid">

     <div id="processing" style="display:none;">
                <div id="loading">
                    <img  src="{% static 'assets/loading-bars.gif' %}" style="height : 100px;">
                    
                </div>  
        </div>
        <!-- BEGIN HEADER -->
        <div class="page-header navbar navbar-fixed-top">
                 <!-- BEGIN HEADER INNER -->
            <div class="page-header-inner ">
                <!-- BEGIN LOGO -->
                <div class="page-logo">
                    <a href="/dashboard/">
                         <img src="{% static 'assets/layouts/layout2/img/City_Hoopla_Logo.png' %}" alt="logo" class="logo-default"/> </a>
                    <div class="menu-toggler sidebar-toggler">
                        <!-- DOC: Remove the above "hide" to enable the sidebar toggler button on header -->
                    </div>
                </div>
                <!-- END LOGO -->
                <!-- BEGIN RESPONSIVE MENU TOGGLER -->
                <a href="javascript:;" class="menu-toggler responsive-toggler" data-toggle="collapse" data-target=".navbar-collapse"> </a>
                <!-- END RESPONSIVE MENU TOGGLER -->
                <!-- BEGIN PAGE TOP -->
                <div class="page-top">
                    <!-- BEGIN TOP NAVIGATION MENU -->
                    <div class="top-menu">
                        <ul class="nav navbar-nav pull-right">                         
                            <li class="dropdown dropdown-user">
                                <a href="javascript:;" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-close-others="true">
                                    
                                    <span class="username username-hide-on-mobile"> {{ username }} </span>
                                    <i class="fa fa-angle-down"></i>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-default">
                                   <li>
                                <a href="/edit-profile/?user_id={{request.session.login_user}}">
                                    <i class="fa fa-user" aria-hidden="true"></i> My Profile </a>
                            </li>
                                    <li>
                                        <a href="/log-out/">
                                            <i class="icon-key"></i> Log Out </a>
                                    </li>
                                </ul>
                            </li>
                            <!-- END USER LOGIN DROPDOWN -->
                        </ul>
                    </div>
                    <!-- END TOP NAVIGATION MENU -->
                </div>
                <!-- END PAGE TOP -->
            </div>
            <!-- END HEADER INNER -->
        </div>
        <!-- END HEADER -->
        <!-- BEGIN HEADER & CONTENT DIVIDER -->
        <div class="clearfix"> </div>
        <!-- END HEADER & CONTENT DIVIDER -->
        <!-- BEGIN CONTAINER -->
        <div class="page-container">
            <!-- BEGIN SIDEBAR -->
            <div class="page-sidebar-wrapper">
                <!-- END SIDEBAR -->
                <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
                <!-- DOC: Change data-auto-speed="200" to adjust the sub menu slide up/down speed -->
                <div class="page-sidebar navbar-collapse collapse">
                    <!-- BEGIN SIDEBAR MENU -->
                    <!-- DOC: Apply "page-sidebar-menu-light" class right after "page-sidebar-menu" to enable light sidebar menu style(without borders) -->
                    <!-- DOC: Apply "page-sidebar-menu-hover-submenu" class right after "page-sidebar-menu" to enable hoverable(hover vs accordion) sub menu mode -->
                    <!-- DOC: Apply "page-sidebar-menu-closed" class right after "page-sidebar-menu" to collapse("page-sidebar-closed" class must be applied to the body element) the sidebar sub menu mode -->
                    <!-- DOC: Set data-auto-scroll="false" to disable the sidebar from auto scrolling/focusing -->
                    <!-- DOC: Set data-keep-expand="true" to keep the submenues expanded -->
                    <!-- DOC: Set data-auto-speed="200" to adjust the sub menu slide up/down speed -->
                    {% include 'Admin/side-panel.html' %}
                    <!-- END SIDEBAR MENU -->
                </div>
                <!-- END SIDEBAR -->
            </div>
            <!-- END SIDEBAR -->
            <!-- BEGIN CONTENT -->
            <div class="page-content-wrapper">
                <!-- BEGIN CONTENT BODY -->
                <div class="page-content ">
                    <div class="row">
                        <div class="col-lg-12 ">
                        	<div class="col-md-6">
                        	<br>
										<span class="brad-crum-1"><b>Configure</b></span>  <i class="fa fa-angle-right"></i>  <span class="brad-crum-2">Category</span>  </h4>			
									</div>
								 </div>
							</div> 
							<br>
							
						
				<div class="row">
		       <div class="col-lg-12">		
			
		          <ul class="nav nav-tabs">
		               <li class="active"><a data-toggle="tab" href="#subscriber" onclick="tab_change1();"  >CityBusiness </a></li>
		               <li><a data-toggle="tab" href="#sales" onclick="tab_change2();">CityLife </a></li>
		          </ul>
		          
		          <div class="tab-content">   
			         <div id="subscriber" class="tab-pane fade in active" >  							
							  
                            <div class="portlet light  ">
                                 <!-- <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-social-dribbble font-green"></i>
                                        <span class="caption-subject font-green bold uppercase">Category List</span>
                                    </div>
                                </div> -->
 
                                <div class="portlet-body form">
                                    <!-- BEGIN FORM-->
                                    <br>
                                    <form action="" >
                                    	<div class="row" id="sfilter">
                                       	<div class="col-lg-2">
                                               <div class="form-group">
                                                   <label class="control-label ">Country
                                                   </label>
                                                   <select required="" name="country" id="country"
                                                           class="form-control">
                                                       <option value="">Select Country</option>
                                                       {% for country in country_list %}
                                                       <option value="{{country.country_id}}">
                                                           {{country}}
                                                       </option>
                                                       {% endfor %}
                                                   </select>
                                                   <label class="error11" id="error11" style="color:red; display:none;"></label>

                                               </div>

                                           </div>
                                           <div class="col-lg-2">
                                               <div class="form-group">
                                                   <label class="control-label ">State
                                                   </label>
                                                   
                                                   <select required="" name="state" id="state" class="form-control" required="">
										                     	<option value="">Select State </option>
										                     </select>
                                                   <label class="error12" id="error12"
                                                          style="color:red; display:none;"></label>

                                               </div>

                                           </div>
                                           <div class="col-lg-2">
                                               <div class="form-group">
                                                   <label class="control-label ">City
                                                   </label>
                                                   
                                                   <select name="city" id="city1" class="city city_category form-control" required="">
										                     	<option value="">Select City </option>
										                     </select>
                                                   <label class="error13" id="error13"
                                                          style="color:red; display:none;"></label>
                                               </div>

                                           </div>
                                           <div class=" col-lg-2 form-group" style="margin-top: 26px;">
                                                    <div  class="pull-right ">
                                                        <a type="button" href="/category/" class="btn btn-outline grey_color" data-toggle="modal" href="/add-category/"> Clear Results</a>
                                                    </div>
                                                </div>
                                                <div class="col-lg-offset-2 col-lg-2 form-group" style="margin-top: 26px;">
                                                    <div  class="pull-right ">
                                                        <a type="button" style="color: #FFF;border-radius: 20px !important;
							background: transparent -moz-linear-gradient(left center , #0D67E6, #11CA9A) repeat scroll 0% 0% !important;" class="btn btn-outline done_btn" data-toggle="modal" href="/add-category/"> Add Category</a>
                                                    </div>
                                                </div>
                                           
                                       </div>
                                            
                                    </form>
                                    <hr class="custom-hr">
                                    <div class="row">
                                        <div class="col-lg-12">
            <div class="portlet-body">
            {% for cat_obj in data %}
             	<div class = "panel-group" id = "accordion">
   					<div class = "panel panel-default">
					      <div class = "panel-heading">
					         	
					         	<div class="row">
					         		<div class="col-lg-12">
					         			<div class="col-lg-1" style="width: 5.333%;width: 5.333%;
												margin-left: -30px;
												min-height: 21px;">
					         				<div style="min-height: 42px;								         																					
																margin-top: -11px;
																margin-bottom: -10px;background-color: {{cat_obj.cat_color}};">
					         				</div>
					            		</div>
					         			<div class="col-lg-1" style="width: 11.333%;">
					         				<h4 class = "panel-title">
					         				
						            		<a data-toggle = "collapse" id="col{{cat_obj.category_id}}" onclick="get_sub_cat(this.id,{{cat_obj.category_id}})" data-parent = "#accordion" href = "#collapse{{cat_obj.category_id}}">
					   	            	<i class="fa fa-caret-right" id="fa_icon{{cat_obj.category_id}}" style="margin-left: -20px;" aria-hidden="true"></i>	{{cat_obj.category_name}}
					      	      		</a>
				      	      		 </h4>
					            		</div>
					            		<div class="col-lg-4" style="width: 35.333%;">
												Created by: {{cat_obj.category_created_by}} on {{cat_obj.creation_date}}
					            		</div>
					            		<div class="col-lg-5">
												Last Updated by : {{cat_obj.category_updated_by}} on {{cat_obj.updation_date}}
					            		</div>
					            		<div class="col-lg-1" style="text-align: right;">		
					            		<input type="hidden" id="cat_nm" value="{{cat_obj.category_name}}">
					            		{% if  cat_obj.status == 'Active' %}		            		
													<a id={{cat_obj.category_id}} href="/edit-category/?category_id={{cat_obj.category_id}}"  style="text-align: center;letter-spacing: 5px;width:15%;" title="Edit" class="edit" data-toggle="modal" href="#edit_subscription"><i class="fa fa-pencil"></i></a>
													{% if  cat_obj.active_advert == 'No' %}
														<a id={{cat_obj.category_id}} onclick=delete_category({{cat_obj.category_id}}); style="text-align: center;letter-spacing: 5px;width:15%;" title="Delete"  ><i class="fa fa-trash"></i></a>
                                                    {% else %}
                                                        <a onclick="del_mod('{{cat_obj.category_name}}');" style="text-align: center;letter-spacing: 5px;width:15%;" title="Delete"  ><i class="fa fa-trash"></i></a>  
                                                    {% endif %} 
																																				
											{% else %}
													<a id={{cat_obj.category_id}} onclick="active_service(this.id);" style="text-align: center;letter-spacing: 5px;width:15%;margin-left: 36px !important;" title="Activate" class="edit" data-toggle="modal" href="#edit_subscription"><i class="fa fa-repeat"></i></a>
											{% endif %}					            		
					            		</div>
					            </div>
					            </div>					        
					      </div>
      
					      <div id = "collapse{{cat_obj.category_id}}" class = "panel-collapse collapse">
					         <div class = "panel-body">
					         	<div class="col-lg-12">
					         		<div class="col-lg-3">
							         	<div id="cat_list{{cat_obj.category_id}}" class="margin_top_15 margin_bottom_15">
		                           	       
		                           </div>
					            	 </div>
					             </div>
					         </div>
					      </div>      
   </div>
</div>
             {% endfor %}                   
																	
                                    
                                        </div>
                                    </div>
                                    <!-- END FORM-->
                                </div>
                       </div>     
                            <!-- END PORTLET-->
                        </div>
                      </div>
                     
                     <div id="sales" class="tab-pane fade in active" style="display:none">
                         <div class="portlet light  ">
                                 <!-- <div class="portlet-title">
                                    <div class="caption">
                                        <i class="icon-social-dribbble font-green"></i>
                                        <span class="caption-subject font-green bold uppercase">Category List</span>
                                    </div>
                                </div> -->
 
                                <div class="portlet-body form">
                                    <!-- BEGIN FORM-->
                                    <br>
                        					 

                                                        <form id="cityform" role="form" enctype="multipart/form-data"
                                                              name="city-form" method="POST">
                                                            {% csrf_token %}

                                                            <div class="row" >
                                                                <div class="col-lg-3">
                                                                    <div class="form-group">
                                                                        <label class="control-label ">Country
                                                                        </label>
                                                                       
                                                                        <select id="country3" name="country"
                                                                                 onchange="getStates()">
                                                                            <option value="">Select Country</option>
                                                                            {% for country in country_list %}
                                                                            <option value="{{country.country_id}}">
                                                                                {{country}}
                                                                            </option>
                                                                            {% endfor %}
                                                                        </select>
                                                                        <label class="error"
                                                                               style="color:red; display:none;"></label>
                                                                        <!--  <label class="error" id="state_error" style="color:red; display:none;"></label>      -->
                                                                    </div>

                                                                </div>
                                                                <div class="col-lg-3">
                                                                   <div class="form-group">
					 																	   <label  class="control-label"> State

							                                                 </label>
																				 
							                                                 <select style="" onchange="getCitys()" id="state3" name="state"  required > 
																							 	<option value="">Select State</option> 
																							 	                         
																                        {% for state in state_list %}	
																             	
																                        												                        
																                        <option value="{{ state.state_id }}"> {{ state.state_name }}</option>
																                        
																           
																                        {% endfor %}
																                      </select>
													                               <label class="error" style="color:red; display:none;"></label>                                                          	                                                        		
					 																	</div>
					 															    </div>
 																	                                                             
                                                                <div class="col-lg-3">
				 																			<label  class="control-label"> City
				                                                         </label>
				                                                     
				                                                         <select style="" onchange="open_addcat()" name="city" id="city3"  >
																                     	 <option value="">Select City</option>
																                     	{% for city in city_list %}
																                     	<option value="{{ city.city_id }}"> {{ city.city_name }}</option>
																			                 {% endfor %}
																			                       	
																                     </select>
																                     <label class="error" style="color:red; display:none;"></label>
				 																		</div>
 																		
 																		
                                                                
                                                                 <div class="col-lg-2" style="margin-top: 30px;float: right;">
                                                                    <a onclick="add_sub_cat(this.name,0,0,0)"
                                                                       name="sub_cat_level_1-collapse_btn_1"
                                                                       class="btn btn-outline done_btn"> Add Category </a>
                                                                </div>
                                                                
                                                            </div>
                                                            
                                                            <div id="city-sequence">

                                                            </div>

                                                            <label class="error" id="city_error"
                                                                   style="color:red; display:none;"></label>
                                                            <hr>
                                                        </form>

                                                               <br>

																		<div class="col-lg-12" style="z-index: 900;">
																			<div class="col-lg-5" style="z-index: 900;">
																			</div>	
																			<div class="col-lg-4" style="z-index: 900;">									                
												                     <label id="show_data" class="text-center ">  </label> 
												                     </div>
												                     <div class="col-lg-3" style="z-index: 900;">
												                     </div>
												                  </div>
												               </div>
                                                                                                                 
                                                      
                                                        <div class="row" id="cat_div" style="display:none">

                                                            <div class="col-lg-12" >
                                                                <div class="form-group">
                                                                    <label class="control-label ">Category
                                                                        <span class="required"> * </span>
                                                                    </label>
                                                                </div>
                                                                                 
                                                                <div class="row" style='margin-left: 2.33333%;'
                                                                     id="sub_cat_level_1">

                                                                </div>

                                                            </div>
                                                              
                                                        </div>

                                                        <br>

                                                        <div id="save_btn" class="form-actions text-right" style="display:none">

                                                            <div class="row">
                                                                <div class="col-md-12">
                                                                    <a href="/category/"> <input type="button"
                                                                                                 class="btn btn-outline grey_color "
                                                                                      data-dismiss="modal"
                                                                                                 value="Cancel"></input></a>
                                                                    <input id="add_category" value="Save" class="btn btn-outline done_btn"
                                                                           type="button" >
                                                                </div>
                                                            </div>
                                                        </div>
                                                   
                                                 </div>      

                         </div>
                      </div>      
                       
                    </div>
                </div>
                <!-- END CONTENT BODY -->
            </div>
            <!-- END CONTENT -->
        </div>
       </div> 
        <!-- END CONTAINER -->
        <!-- /.modal -->
            <div class="modal fade bs-modal-lg" id="large" tabindex="-1" role="dialog" aria-hidden="true">
                <div class="modal-dialog modal-lg">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                            <h4 class="modal-title">Add User</h4>
                        </div>
                        <div class="modal-body"> 
                            <div class="row">
                                 <div class="form-group col-md-4 ">
                                  <label for="">Username</label>
                                  <input type="text" class="form-control" placeholder="John Dave">
                                  </div>
                                  
                                  <div class="form-group col-md-4 ">
                                  <label for="">Contact No</label>
                                  <input type="text" class="form-control" placeholder="9874562103">
                                  </div>
                                  
                                   <div class="form-group col-md-4 ">
                                  <label for="">Email ID</label>
                                  <input type="text" class="form-control" placeholder="john@dave.com">
                                  </div>
                                </div> 
                                 
                                <div class="row">
                              <div class="form-group col-md-4 ">
                              <label >Role </label>                              
                                  <select class="form-control select2me" name="options2">
                                      <option value="">Select Role</option>
                                      <option value="Option 1">Admin</option>
                                      <option value="Option 2">Manager</option>
                                  </select>
                                </div>
                                
                                <div class="form-group col-md-4 ">
                                  <label for="">Password</label>
                                  <input type="password" class="form-control" placeholder="*****">
                                  </div>
                                  
                                  <div class="form-group col-md-4 ">
                                  <label for="">Confirm Password</label>
                                  <input type="password" class="form-control" placeholder="*****">
                                  </div>
                            </div>  
                         
                        <div class="modal-footer">
                            <button type="button" class="btn dark btn-outline" data-dismiss="modal">Close</button>
                            <button type="button" class="btn green">Save changes</button>
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
                    <!-- /.modal-content -->
                </div>
                
                <!-- /.modal-dialog -->
            </div>
          </div>  
        <!-- /.modal -->
        <!-- BEGIN FOOTER -->
        <div class="page-footer">
            <div class="page-footer-inner"> 2016 &copy; DigiSpace.
            </div>
            <div class="scroll-to-top">
                <i class="icon-arrow-up"></i>
            </div>
        </div>
        <div id="myModal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
       
            <span style="text-align:center">       
        <h4 class="modal-title">Add Category</h4></span>
      </div>
      <div class="modal-body">
        <div class="row">
        
            <div class="col-md-6"><label class="control-label ">Category</label></div>    
            <div class="col-md-6"><input class="form-control" type="text" /></div>         
    
        </div>
        <br>
        <div class="row">
        
            <div class="col-md-6"><label class="control-label ">Do you want to add sub-category?</label></div> 
            <div class="col-md-6"><button type="button" class="btn btn-success col-md-4" id="mychk" onclick="show_det()">Yes</button>
            
            <button type="button" class="btn btn-danger col-md-4 pull-right" onclick="hide_det()">No</button></div>   
          <!--  <div class="col-md-6"><input type="text" id="mychk"/></div>    -->      
            </div>
            <br>
        <div id="sub">
        <div class="row">
            <div class="col-md-6" style="margin-top:2%;"><label class="control-label ">Sub-category-1</label></div>    
            <div class="col-md-6" style="margin-top:2%;"><input type="text" class="form-control" /></div>         
        </div>
        <div class="row">
            <div class="col-md-6" style="margin-top:2%;"><label class="control-label ">Sub-category-2</label></div>    
            <div class="col-md-6" style="margin-top:2%;"><input type="text" class="form-control" /></div>         
        </div>
        <div class="row">
            <div class="col-md-6" style="margin-top:2%;"><label class="control-label ">Sub-category-3</label></div>    
            <div class="col-md-6" style="margin-top:2%;"><input type="text" class="form-control" /></div>         
        </div>
        <div class="row">
            <div class="col-md-6" style="margin-top:2%;"><label class="control-label ">Sub-category-4</label></div>    
            <div class="col-md-6" style="margin-top:2%;"><input type="text" class="form-control" /></div>         
        </div>
        <div class="row">
            <div class="col-md-6" style="margin-top:2%;"><label class="control-label ">Sub-category-5</label></div>    
            <div class="col-md-6" style="margin-top:2%;"><input type="text" class="form-control" /></div>         
        </div>
        </div>
      </div>
      <div class="modal-footer">
        <!-- <button type="button" class="btn btn-default" data-dismiss="modal">Close</button> -->
        <div class="form-actions text-right">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <button type="button" class="btn default" data-dismiss="modal">Cancel</button>
                                                    <button type="save" class="btn green" data-dismiss="modal">Save</button>
                                               
                                                </div>
                                            </div>
                                        </div>
      </div>
    </div>

  </div>
</div>
 
<div class="modal fade draggable-modal" id="delete_category" tabindex="-1" role="basic" aria-hidden="true">
                <div class="modal-dialog" style="width:400px;">
                    <div class="modal-content"> 
                    <div class="modal-header">
                            <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 138px;" src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                    </div>                                                
                        <div class="modal-body">
                            <form  class="form-horizontal form-row-seperated">
                <div class="form-body">
                    <h4 class="text-center">Do you want to deactivate category?</h4>
                        </div>
                        <div style="text-align:center !important;" class="modal-footer">
                        <button type="button" onclick="inactive_category()" class="btn green">Yes</button>
                        <button type="button" class="btn green" data-dismiss="modal">No</button>
                            
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
        </div>   
    <div class="modal fade draggable-modal" id="remove_category" tabindex="-1" role="basic" aria-hidden="true">
                <div class="modal-dialog" style="width:400px;">
                    <div class="modal-content">  
                            <div class="modal-header">
                                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 138px;" src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
<!--                                <button type="button" class="close" data-dismiss="modal">&times;</button> -->
                             </div>                                                 
                    <div class="modal-body">

                <div class="form-body">
                    <h4 class="text-center">Category deactivated successfully</h4>
                        </div>
                        <div style="text-align:center !important;" class="modal-footer">
                        <button type="button" onclick="location.reload()" class="btn green" data-dismiss="modal">OK</button>

                            
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
        </div>

            <div class="modal fade draggable-modal" id="active_service" tabindex="-1" role="basic" aria-hidden="true">
                <div class="modal-dialog" style="width:400px;">
                   <div class="modal-content">
                     <div class="modal-header">
                            <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 138px;" src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                    </div>                                                
               <div class="modal-body">
                <div class="form-body">
                    <h4 class="text-center">Do you want to activate the Category ?</h4>
                        </div>
                        <div style="text-align:center !important;" class="modal-footer">
                        <button type="button" onclick="activate_service()" class="btn green">Yes</button>
                        <button type="button" class="btn green" data-dismiss="modal">No</button>
                            
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
        </div>
        
         <div class="modal fade draggable-modal" id="activate_service" tabindex="-1" role="basic" aria-hidden="true">
                <div class="modal-dialog" style="width:400px;">
                    <div class="modal-content">
                     <div class="modal-header">
                            <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 138px;" src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">

                    </div>                                                
                        <div class="modal-body">

                <div class="form-body">
                    <h4 class="text-center">Category has been activated successfully</h4>
                        </div>
                        <div style="text-align:center !important;" class="modal-footer">
                        <button onclick="location.reload()"type="button"
                                   class="btn btn-primary" id="advert-btn">OK</button>

                            
                        </div>
                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
        </div>
 
        <!-- END FOOTER -->
        <div style="overflow-y:hidden;" id="affiliate-modal" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 374px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 130px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!-- <a href="/category/">  <button type="button" class="close" data-dismiss="modal">&times;</button></a> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 style="text-align:center;" id="cat_model">Category added successfully</h4>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-5 col-md-2">
                     <input type="button" data-dismiss="modal" value="OK" class="btn btn-primary" id="btn-loading-demo" >
                    </div>
                </div>
            </div>

        </div>

    </div>
</div>

<div style="overflow-y:hidden;" id="error-modal" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 416px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 146px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 class="text-center" id="error-message"></h4>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-offset-5 col-md-2">
                        <input data-dismiss="modal" type="submit" value="OK"
                               class="btn btn-primary" id="btn-loading-demo">
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

<div style="overflow-y:hidden;" id="remove_cat_model" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 416px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 146px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 style="text-align:center;">Are you sure you wish to delete the category ?</h4>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-12">
                    		 <div class="col-md-6" id="yup">
   								  <input  type="hidden" 
                               class="btn btn-primary" id="yes1" >                             
                             <input  type="submit" value="Yes"
                               class="btn btn-primary" id="delete_city_cat" >
                         </div>
                         <div class="col-md-2" >
                             <input data-dismiss="modal" type="submit" value="No"
                               class="btn btn-primary" id="btn-loading-demo" >
                         </div>
                    </div>
                    
                </div>
            </div>
        </div>

    </div>
</div>

        <div class="modal fade draggable-modal" id="del_mod" tabindex="-1" role="basic" aria-hidden="true">
        <div class="modal-dialog" style="width:400px;">
            <div class="modal-content">                                                
                <div class="modal-body">
                        <div class="modal-header">
                       <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 120px;" src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                    </div>
                    <div class="form-body">
                        <h4 class="text-center" id="del_mod_msg">The City "City Name" cannot be deleted as there are active adverts present for it</h4>
                   </div>
                        <div style="text-align:center !important;" class="modal-footer">
                        <button type="button" class="btn green" data-dismiss="modal">OK</button>
                        </div>
                    </div>
                </div>
            </div>
  </div>

<div style="overflow-y:hidden;" id="success_cat_model" class="modal fade" role="dialog">
    <div class="modal-dialog" style="width: 416px;">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <img style="width: 100px; height: 29px; margin-top: -11px; margin-left: 146px;"
                     src="/static/assets/layouts/layout2/img/City_Hoopla_Logo.png" alt="logo" class="logo-default">
                <!-- <button type="button" class="close" data-dismiss="modal">&times;</button> -->
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12">
                        <h4 style="text-align:center;"> Category deleted successfully </h4>
                    </div>
                </div>

            </div>
            <div class="modal-footer">
                <div class="row">
                    <div class="col-md-12">
                    		
                        <div class="col-md-offset-5 col-md-2">
                           <input type="button" data-dismiss="modal" value="OK" class="btn btn-primary" id="btn-loading-demo" >
                       </div>
                    </div>
                    
                </div>
            </div>
        </div>

    </div>
</div>
        <!--[if lt IE 9]>
<script src="{% static 'assets/global/plugins/respond.min.js' %}"></script>
<script src="{% static 'assets/global/plugins/excanvas.min.js' %}"></script> 
<![endif]-->
        <!-- BEGIN CORE PLUGINS -->
        <script src="{% static 'assets/global/plugins/jquery.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/bootstrap/js/bootstrap.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/js.cookie.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/jquery.blockui.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/uniform/jquery.uniform.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/bootstrap-switch/js/bootstrap-switch.min.js' %}" type="text/javascript"></script>
        <!-- END CORE PLUGINS -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="{% static 'assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/jquery-multi-select/js/jquery.multi-select.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL PLUGINS -->
                <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="{% static 'assets/global/plugins/select2/js/select2.full.min.js' %}" type="text/javascript"></script>
         <script src="{% static 'assets/pages/scripts/components-select2.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL PLUGINS -->
        <!-- BEGIN THEME GLOBAL SCRIPTS -->
        <script src="{% static 'assets/global/scripts/app.min.js' %}" type="text/javascript"></script>
        <!-- END THEME GLOBAL SCRIPTS -->
        <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <script src="{% static 'assets/pages/scripts/components-multi-select.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL SCRIPTS -->
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <script src="{% static 'assets/global/scripts/datatable.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/datatables/datatables.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL PLUGINS -->
          <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <script src="{% static 'assets/pages/scripts/table-datatables-managed.min.js' %}" type="text/javascript"></script>
        <!-- END PAGE LEVEL SCRIPTS -->
        <!-- BEGIN THEME LAYOUT SCRIPTS -->
        <script src="{% static 'assets/layouts/layout2/scripts/layout.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/layouts/layout2/scripts/demo.min.js' %}" type="text/javascript"></script>
        <script src="{% static 'assets/layouts/global/scripts/quick-sidebar.min.js' %}" type="text/javascript"></script>
        <!-- END THEME LAYOUT SCRIPTS -->
        
         <script type="text/javascript">
         


         $("#ref_data_nav").addClass("active");
         $("#category_nav").addClass("active");
         
         
         
function tab_change1(){

$("#subscriber").css("display","block");
$("#sales").css("display","none");
$("#management").css("display","none");
$("#analytical").css("display","none");
table_init();
 table_init2();
}         
         
         function tab_change2(){

$("#subscriber").css("display","none");
$("#sales").css("display","block");


}

        $(document).ready(function() {
        

        
        		 $(".city").select2();
        $("#city").select2();
        $("#city1").change(function () {
				search_category_list();
			});
        $("#country").select2();
        $("#state").select2();
        $("#country").change(function () {
				getState();				
			});
			$("#state").change(function () {
				cgetCity();				
			});
        	
             var oTable = $('#category_table').dataTable({
                    "bFilter": true,
               "bLengthChange": false,
               //"scrollX": true,
               "iDisplayLength": 20,
                //"sScrollY":"380px",
                'bScrollCollapse':true,
                 "ajax": "/category-list/",
                  "columns": [
               
                {"data": "category_name"},
                {"data": "city_name"},
                 {"data": "creation_date"},
                 {"data": "updated_by"},
                 {"data": "updation_date"},
                 {"data": "status"},
                {"data": "actions"},
                    ],
                     "order": [[0, "asc"]],
                    "cache": false 
        })
   
            $("#txtSearch").keyup(function() {
                oTable.fnFilter($("#txtSearch").val());
            });           
            }); 
                     
		function getState() {
        country_id = $('#country').val();
        if (country_id) {
            $.ajax({
                type: 'GET',
                url: '/cget-state/',
                data: {'country_id': country_id},
                success: function (response) {
                    $('#state').html('');                   
                    $.each(response.state_list, function (index, item) {
                        $('#state').append(item);
                    });
                    $('#state').val("");
                },
                error: function (response) {
                    alert("Error!");
                },
            });
        }
        else {
            $('#state').val("");
        }
    }

	function cgetCity() {
        state_id = $('#state').val();
        if (state_id) {
            $.ajax({
                type: 'GET',
                url: '/cget-city/',
                data: {'state_id': state_id},
                success: function (response) {
                    $('#city1').html('');                    
                    $.each(response.city_list, function (index, item) {
                        $('#city1').append(item);
                    });
                    $('#city1').val("");
                },
                error: function (response) {
                    alert("Error!");
                },
            });
        }
        else {
            $('#city').val("");
        }
    }

	function get_sub_cat(id,catid) {
		var a = id;
		
		var category_id = catid;
		//alert(fa_icon);
		var clname = document.getElementById("fa_icon"+catid).className;
		//alert(clname);
		if (clname == 'fa fa-caret-right') {
			$("#fa_icon"+catid).removeClass("fa fa-caret-right");
      	$("#fa_icon"+catid).addClass("fa fa-caret-down");
		}
		if (clname == 'fa fa-caret-down') {
			$("#fa_icon"+catid).removeClass("fa fa-caret-down");
      	$("#fa_icon"+catid).addClass("fa fa-caret-right");
		}
		//$(fa_icon).removeClass("fa fa-caret-right");
      //$(fa_icon).addClass("fa fa-caret-down");
		 $.ajax({
            type : "GET",
            url : '/get_all_category_list_details/',
            data : {'category_id':category_id},
            success: function (response) {
                if(response.success=='true'){
                //alert(response);
                    $("#cat_list"+category_id).html('');
                    $("#cat_list"+category_id).append(response.cat_str);
                }
                
            },
            
            error : function(response){
                alert("_Error");
            }
        });
	}

	function search_category_list() {
		country_id = $('#country').val();
		state_id = $('#state').val();
		city_id = $('#city1').val();
		location.href="/category/?city_id="+city_id	 
	}


	 function collapse_div(div_name,xyz){
        if ($("."+div_name).is(':hidden')){
            $("."+div_name).show();
            $(xyz).removeClass("fa fa-plus-square");
            $(xyz).addClass("fa fa-minus-square");
        }
        else{
            $("."+div_name).hide();
            $(xyz).removeClass("fa fa-minus-square");
            $(xyz).addClass("fa fa-plus-square");
        }
    }

     var xyz;
    function delete_category(id) {
        xyz = id;        
        $("#delete_category").modal('show');
   }        
     
         function inactive_category() {
        var  category_id = xyz;
        $("#delete_category").modal('hide');
        $.ajax({
            type: 'POST',
            url: '/delete-category/',
           data: {'category_id': category_id},
            success: function (response) {
            console.log(response);
                if (response.success == 'true') {
                    $("#delete_category").modal('hide');
                  $("#remove_category").modal('show');
                }
                if (response.success == 'false') {
                    
                }
            },
             beforeSend: function () {
            $("#processing").css('display','block');
            },
            complete: function () {
                $("#processing").css('display','none');
            },
            error: function (response) {
            console.log(response);
               
            },
        });    
    }  

  var pqr;
function active_service(id){
  pqr = id;
  $("#active_service").modal('show');
    }
    
    function activate_service() {
        var  category_id = pqr;
        $("#active_service").modal('hide');
        $.ajax({
            type: 'POST',
            url: '/active_category/',
            data: {'category_id': category_id},
            success: function (response) {
            console.log(response);
                if (response.success == 'true') {
                    $("#active_service").modal('hide');
                  $("#activate_service").modal('show');
                }
                if (response.success == 'false') {
                    
                }
            },
                beforeSend: function () {
            $("#processing").css('display','block');
            },
            complete: function () {
                $("#processing").css('display','none');
            },
            error: function (response) {
            console.log(response);
               
            },
        });    
    }  
                    
        
        </script>
        
        
        <script type="text/javascript">


    $('#delete_city_cat').click(function(event){
        event.preventDefault();
        call_rem();
        });

var cat_id_global =''
function call_rem() {

	var xyz = document.getElementsByName($("#yes1").val());

	$(xyz).parent().parent().parent().parent().find('.col-lg-12').children().find('.fa-caret-down').removeClass("fa-caret-down").addClass("fa-caret-right");
   $(xyz).parent().parent().next('div').html('');
   $(xyz).parent().parent().html('');
   $("#remove_cat_model").modal('hide');
   
   


			cat_id_global = cat_id_global
  			$.ajax({
  				  
				   type	: "POST",
				   url : '/city-life/delete-citylife-cat/',
 					data : {'cat_id_global': cat_id_global},
				                       
              success: function (response) {
	              if(response.success=='true'){
		           	  	    
				          $("#sub_cat_level_1").html("");
		           	    $.each(response.final_list, function (index, item) {
        		              btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_"+ index +"' id='"+item.category_id+"' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
                          child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level"+ index +"'></div>"
                          var div_str = "<div class='col-lg-12'><div class='col-lg-10' style='width: 422px;margin-left: -39px;'><div class='form-group' >"
                          div_str = div_str + "<input value='"+item.category_name+"' type='text' name='level_1' id='"+ item.category_id +"' class='form-control' /><label for='sub_cat_name"+ index +"' class='error' style='color:red; display:none;'></div></div>"
                          div_str = div_str + btn + "</div>"+ child_div
						        $("#sub_cat_level_1").append(div_str);
						        $("#sub_cat_level_1").show();
				          });
				         $("#success_cat_model").modal('show');
				          
	              	}
	      			if (response.success == "false") {
							$("#error-modal").modal('show');                    
	       			}							                        		                      		                       		
               },
               	beforeSend: function () {
            $("#processing").css('display','block');
            },
            complete: function () {
                $("#processing").css('display','none');
            },
               error : function(response){
                  	alert("_Error");
            	}              
           });
   
  
   
}
 
function remove_sub_cat_new(xyz){
    $("#yes1").val(xyz.name);
    cat_id_global = xyz.id
    $("#remove_cat_model").modal('show');
}
    
list = []

function open_addcat() {


if ($("#city3").val()!= '' ) {
 
		 $("#cat_div").css("display","block");
		 $("#save_btn").css("display","block");
       
     

	   var formData= new FormData();
		formData.append('city',$("#city3").val());

  			$.ajax({
  				  
				   type	: "POST",
				   url : '/city-life/citylife-cat/',
 					data : formData,
					cache: false,
		         processData: false,
		    		contentType: false,                       
              success: function (response) {
	              if(response.success=='true'){
		           	  	 if (response.final_list != '') {
		           	  	
		           	  	 $("#show_data").html(""); 	
				          $("#sub_cat_level_1").html("");
		           	    $.each(response.final_list, function (index, item) {
        		              btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_"+ index +"' id='"+item.category_id+"' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
                          child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level"+ index +"'></div>"
                          var div_str = "<div class='col-lg-12'><div class='col-lg-10' style='width: 422px;margin-left: -39px;'><div class='form-group' >"
                          div_str = div_str + "<input value='"+item.category_name+"' type='text' name='level_1' id='"+ item.category_id +"' class='form-control' /><label for='sub_cat_name"+ index +"' class='error' style='color:red; display:none;'></div></div>"
                          div_str = div_str + btn + "</div>"+ child_div
						        $("#sub_cat_level_1").append(div_str);
						        $("#sub_cat_level_1").show();
				          });
				         
		           	  	 }
		           	  	else {
		           	  		 $("#show_data").css("display","block"); 
		           	  		 $('#show_data').text("No category available");
		           	  		 $("#sub_cat_level_1").html("");
		           	  		 $("#cat_div").css("display","none");
		                   $("#save_btn").css("display","none");
		           	  	} 
	              	}
	      			if (response.success == "false") {
							$("#error-modal").modal('show');                    
	       			}							                        		                      		                       		
               },
               	beforeSend: function () {
            $("#processing").css('display','block');
            },
            complete: function () {
                $("#processing").css('display','none');
            },
               error : function(response){
                  	alert("_Error");
            	}              
           });   
			
		}
else {

	$("#sub_cat_level_1").css('display','none');
	$("#cat_div").css("display","none");
   $("#save_btn").css("display","none");
   $("#show_data").html(""); 
}  
}	

 $(document).ready(function(){
     $(".city").select2();
     $("#city3").select2();
     $("#country3").select2();
     $("#state3").select2();
     
 });
 
     /* For Delete Blank category */
 var p_index = 1;
    function remove_cat(p_index){

        $("#prod"+p_index).remove();

    }

  i = 1;
  j = 0;
  k = 0;
  
function add_sub_cat(div_name,level,key,a){
			
		if ($("#city3").val()!= '') {
			$("#show_data").html(""); 	

		  $("#show_data").css("display","none");

     if ($("sub_cat_level_1").val() == '') {
     			 $("#sub_cat_level_1").html("");
     }   	  
   	 
   	  
   	  
   	  $("#cat_div").css("display","block");
        $("#save_btn").css("display","block");
		                   
        var div_name = div_name.split('-');
        $("#"+div_name[1]).removeClass("fa fa-caret-right fa-lg").addClass("fa fa-caret-down fa-lg");
        if(level == 5){
            return false;
        }
        i = i + 1;
        k = k + 1;
        levels = level + 1;
        if(level == 0){
            level_name = 'level_1'
        }
        else if(level == 1){
            level_name = 'level_2'
        }
        else if(level == 2){
            level_name = 'level_3'
        }
        else if(level == 3){
            level_name = 'level_4'
        }
        else if(level == 4){
            level_name = 'level_5'
        }
      
            btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_' id='' style='color:red' onclick='remove_cat("+p_index+");' class='fa fa-times-circle fa-lg'></a></div>"
           // btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'><a name='sub_cat_level"+ i +"-collapse_btn_"+ i +"' onclick='add_sub_cat(this.name,"+levels+","+j+","+k+")' class='fa fa-plus-circle fa-lg'></a>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
            child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level"+ i +"'></div>"
            
        $("#"+div_name[0]).append(
            "<div class='col-lg-12' id='prod"+ p_index +"'><div class='col-lg-10' style='width: 422px;margin-left: -39px;'><div class='form-group' >"+
           
            "<input type='text' name='"+level_name+"'  id='' class='form-control' /><label for='sub_cat_name"+ k +"' class='error' style='color:red; display:none;'></div></div>"+
            btn + "</div>"+ child_div

        );
        
        p_index++;

        $("#"+div_name[0]).show();
        }
		}

    $("#add_category").click(function(event)  {

        if (validateData() == false){
            return false;
        };

        var panel= $("#sub_cat_level_1");
        var inputs = panel.find("input");
        var namePattern = /[a-zA-Z0-9\-\s]+$/;

        for (i = 0; i < inputs.length; i++) {

            var label = $("label[for='"+inputs[i].id+"']");
            if(namePattern.test(inputs[i].value))
            {
                if($.isNumeric(inputs[i].value))
                {
                    label.css("display", "block");
                    label.html("Category should contain alphanumeric only");
                    return false;
                }
            }
            else{
                label.css("display", "none");
                label.html("");
            }
        }

        event.preventDefault();

        category = $("#cat_name").val();
        var namePattern = /[a-zA-Z0-9\-\s]+$/;

        if (category=="")
        {
            $("#cat_error").css("display", "block");
            $("#cat_error").html("Please enter category");
            return false;
        }
        else{
            $("#cat_error").css("display", "none");
            $("#cat_error").html("");
        }

        if(namePattern.test(category))
        {
            if($.isNumeric($("#cat_name").val()))
            {
                $("#cat_error").css("display", "block");
                $("#cat_error").html("Category should contain alphanumeric only");
                return false;
            }
        }
        else{
            $("#cat_error").css("display", "none");
            $("#cat_error").html("");
        }

        var panel= $("#sub_cat_level_1");
        var inputs = panel.find("input");

        var level_1 = '';
        var level_2 = [];
        var level_3 = [];
        var level_4 = [];
        var level_5 = [];
        list = []
        list1 = []
        for (i = 0; i < inputs.length; i++) {
            j = i + 1;
            if (j <= inputs.length){
                if (j== inputs.length){
                    j = j - 1;
                }
              
                if($.isNumeric(inputs[i].value)){
                    $(inputs[i]).parent().children('.error').css("display", "block");
                    $(inputs[i]).parent().children('.error').html("category should contain alphanumeric only");;
                    return false;
                }
                if(inputs[i].name == 'level_1'){
                    if(level_1 !=[] && inputs[j].name != 'level_2' || level_1 ==[] && inputs[j].name != 'level_2'){
                        level_1 = [];
                       
                        level_1 = inputs[i].value;                   
                        list.push(level_1);
                        
                        cat_id = inputs[i].id ;
                        if (cat_id == "") {
                        	list1.push("");	
                        }
                        else {
                        	list1.push(cat_id);	
                        }

                    }
                    else{
                        level_1 = []
                        level_1 = inputs[i].value
                        level_2 = []
                        level_3 = []
                        level_4 = []
                        level_5 = []
                    }
                }               
            }
            //console.log(inputs[i].value);
        }

        var formData = new FormData();

        formData.append('list',list);
        formData.append('list1',list1);

        //formData.append('form_data',$("#cityform").serialize());
        formData.append('city',$("#city3").val());
        formData.append('country',$("#country3").val());

        $.ajax({

            type : 'POST',
            url : '/city-life/save-category-citylife/',
            data : formData,
            cache: true,
            processData: false,
            contentType: false,

            success: function (response) {
                if(response.success=='true'){
                                    
                      $("#sub_cat_level_1").html("");
		           	    $.each(response.final_list, function (index, item) {
        		              btn = "<div class='col-lg-1' style='margin-top: 7px; margin-left:15px; padding:0px;'>&nbsp;&nbsp;<a name='sub_cat_level-collapse_btn_' id='"+item.category_id+"' style='color:red' onclick='remove_sub_cat_new(this);' class='fa fa-times-circle fa-lg'></a></div>"
                          child_div = "<div class='row' style='margin-left: 4.33333%;' id='sub_cat_level"+ index +"'></div>"
                          var div_str = "<div class='col-lg-12'><div class='col-lg-10' style='width: 422px;margin-left: -39px;'><div class='form-group' >"
                          div_str = div_str + "<input value='"+item.category_name+"' type='text' name='level_1' id='"+item.category_id+"' class='form-control' /><label for='sub_cat_name"+ index +"' class='error' style='color:red; display:none;'></div></div>"
                          div_str = div_str + btn + "</div>"+ child_div
						        $("#sub_cat_level_1").append(div_str);
						        $("#sub_cat_level_1").show();
				          });
				            $('#cat_model').text(response.message)
				            $("#affiliate-modal").modal('show');

                }
               else if (response.success=='true1') {
               	 $("#sub_cat_level_1").html("");
               	 $("#affiliate-modal").modal('show');
               }
                if (response.success == "false") {
                    $('#error-message').text(response.message)
                        $("#error-modal").modal('show');
                    }
                },
                beforeSend: function () {
                    $("#processing").css('display','block');
                },
                complete: function () {
                    $("#processing").css('display','none');
                },
                error : function(response){
                    alert("_Error");
                }
            });

    });

function validateData(){
        if(checkcountry("#country3") == true & checkCity("#city3") == true){
          
            return true;
        }
        else {
        	 return false;
        }
       
    }


function checkcountry(country){
 if($(country).val()!='' && $(country).val()!=null)
   {
   $(country).parent().children('.error').css("display", "none");
   return true;
   }

   else {
    $(country).parent().children('.error').css("display", "block");
    $(country).parent().children('.error').text("Please select Country");
   return false; 
   }
}

function checkCity(city){
 if($(city).val()!='' && $(city).val()!=null)
   {
   $(city).parent().children('.error').css("display", "none");
   return true;
   }

   else {
    $(city).parent().children('.error').css("display", "block");
    $(city).parent().children('.error').text("Please select City");
   return false; 
   }
}

function getCity() {

        cont_id = $('#country3 :selected').val();
        if (cont_id) {
            $.ajax({

                type: 'GET',
                url: '/city-life/get-city-countrybase/',
                data: {'cont_id': cont_id},
                success: function (response) {
                		//	alert('success');
                    $('#city3').html('');
                    $('#city3').append("<option value=''>Select City</option>");
                    $.each(response.city_list, function (index, item) {
                        $('#city3').append(item);
                    });
                    $('#city3').val("");
                },
                error: function (response) {
                    alert("Error!");
                },
            });
        }
        else {
        $('#city3').html('');
        $('#city3').val("");
        $("#sub_cat_level_1").css('display','none');
        }
    }



function getStates() {
			
        country_id = $('#country3 :selected').val();
        //alert(country_id);
        if (country_id) {
           //alert('in getState');
            $.ajax({

                type: 'GET',
                url: '/subscriber-portal/get-state/',
                data: {'country_id': country_id},
                success: function (response) {
                		//alert('success');
                    $('#state3').html('');
                    $('#state3').append("<option value=''>Select State</option>");
                    $.each(response.state_list, function (index, item) {
                        $('#state3').append(item);
                    });
                    $('#state3').val("");
                },
                error: function (response) {
                    alert("Error!");
                },

            });
        }
        else {
            $('#state3').html('');
            $('#state3').append("<option value=''>Select State</option>");
            $('#state3').val("").change();
        }
    }

    function del_mod(cat_name) {
        $('#del_mod_msg').html('');
        cat_nm = $('#cat_nm').val();
        
        $('#del_mod_msg').text('The Category '+cat_name+' cannot be deleted as there are active adverts present for it');
        $("#del_mod").modal('show');
   } 
  
 function getCitys() {

			//$('#city').select2('val','');
			//$('#pincode').select2('val','');
        state_id = $('#state3 :selected').val();
        if (state_id) {
           //alert('in getcity');
            $.ajax({

                type: 'GET',
                url: '/subscriber-portal/get-city/',
                data: {'state_id': state_id},
                success: function (response) {
                		//	alert('success');
                    $('#city3').html('');
                    $('#city3').append("<option value=''>Select City</option>");
                    $.each(response.city_list, function (index, item) {
                        $('#city3').append(item);
                    });
                    $('#city3').val("");
                },
                error: function (response) {
                    alert("Error!");
                },

            });
        }
        else {
            $('#city3').val("");
            $('#city3').append("<option value=''>Select City</option>");
            $('#city3').val("").change();
        }
    }
      
    
</script>
    </body>

</html>
